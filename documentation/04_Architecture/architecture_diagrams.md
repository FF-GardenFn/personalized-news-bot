# News Bot: Architecture Diagrams

This document provides visual representations of the News Bot system architecture, agent interactions, and data flow to complement the detailed descriptions in the system architecture document.

## System Architecture Overview

```
┌──────────────────────────────────────────────────────────────────────────────┐
│                              NEWS BOT SYSTEM                                 │
│                                                                              │
│   ┌─────────────┐     ┌─────────────┐     ┌─────────────┐                    │
│   │  News Data  │     │  Recipient  │     │  External   │                    │
│   │   Sources   │     │   Profiles  │     │   Context    │                   │
│   └──────┬──────┘     └──────┬──────┘     └──────┬──────┘                    │
│          │                   │                   │                           │
│          ▼                   ▼                   ▼                           │
│   ┌───────────────────────────────────────────────────────────────┐          │
│   │                     Data Management Layer                     │          │
│   └───────────────────────────────────────────────────────────────┘          │
│                               │                                              │
│                               ▼                                              │
│   ┌───────────────────────────────────────────────────────────────┐          │
│   │                      Orchestration Layer                      │          │
│   └───────────────────────────────────────────────────────────────┘          │
│                               │                                              │
│                               ▼                                              │
│   ┌───────────────────────────────────────────────────────────────┐          │
│   │                          AGENT SWARM                          │          │
│   ├───────────────────────────────────────────────────────────────┤          │
│   │   ┌─────────────┐ ──▶ ┌─────────────┐ ──▶ ┌─────────────┐     │          │
│   │   │   Wave 0    │     │   Wave 1    │     │   Wave 2    │     │          │
│   │   │(WebSearch)  │     │(Categorizer,│     │(FactChecker)│     │          │
│   │   └─────────────┘     │ Recommender)│     └──────┬──────┘     │          │
│   │                       └─────────────┘            │            │          │
│   │                                                  │            │          │
│   │                                                  ▼            │          │
│   │   ┌────────────────────────────────────────────────────────┐  │          │
│   │   │ Wave 3 (Synthesizer, LinkageDetect, ArXivSearch,       │  │          │
│   │   │           GitHubSearch, Patent Agent)                  │  │          │
│   │   └────────────────────┬───────────────────────────────────┘  │          │
│   │                         │                                     │          │
│   │                         ▼                                     │          │
│   │            ┌──────────────────────────┐                       │          │
│   │            │  Wave 4 (Summarizer)     │                       │          │
│   │            └────────────┬────────────┘                        │          │
│   │                         │                                     │          │
│   │                         ▼                                     │          │
│   └───────────────────────────────────────────────────────────────┘          │
│                               │                                              │
│                               ▼                                              │
│   ┌───────────────────────────────────────────────────────────────┐          │
│   │                       Delivery Interface                      │          │
│   └───────────────────────────────────────────────────────────────┘          │
└──────────────────────────────────────────────────────────────────────────────┘
```

## Agent Interaction Flow

```
┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│  Raw News   │     │  Recipient  │     │  External   │
│    Items    │     │   Profile   │     │   Context   │
└──────┬──────┘     └──────┬──────┘     └──────┬──────┘
       │                   │                   │
       └───────────────────┼───────────────────┘
                           │
                           ▼
                ┌─────────────────────┐
                │    Web Searcher     │  WAVE 0
                │       Agent         │
                └──────────┬──────────┘
                           │
                           ▼
       ┌─────────────────────────────────────────┐
       │               WAVE 1                    │
       │                                         │
       │  ┌─────────────────┐ ┌─────────────────┐│
       │  │   Categorizer   │ │   Recommender   ││
       │  │      Agent      │ │      Agent      ││
       │  └────────┬────────┘ └────────┬────────┘│
       └───────────┼──────────────────┬──────────┘
                   │                  │
                   │ (From Cat.)      │ (From Rec.)
                   ▼                  │
       ┌─────────────────┐            │
       │  Fact-Checker   │  WAVE 2    │
       │     Agent       │            │
       │  (includes      │            │
       │  Triangulation) │            │
       └────────┬────────┘            │
                │                     │
                ▼                     ▼
┌─────────────▽─────────────────────▽─────────────────┐
│                     WAVE 3                          │
│                                                     │
│  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐    │
│  │ Synthesizer │ │   Linkage   │ │    ArXiv    │    │
│  │    Agent    │ │   Detector  │ │   Searcher  │    │
│  └──────┬──────┘ └──────┬──────┘ └──────┬──────┘    │
│         │               │               │           │
│         │               │               │           │
│  ┌─────────────┐ ┌─────────────┐        │           │         
│  │   GitHub    │ │   Patent    │        │           │
   │  Searcher   │ │    Agent    │        │           │
│  └──────┬──────┘ └──────┬──────┘        │           │
│         │               │               ▼           │
└─────────┼───────────────┼───────────────┬───────────┘
          │               │               │
          └───────────────┼───────────────┘
                          │
                          ▼
               ┌─────────────────────┐
               │     Summarizer      │  WAVE 4
               │       Agent         │
               └──────────┬──────────┘
                          │
                          ▼
               ┌─────────────────────┐
               │    Personalized     │
               │   News Briefing     │
               └─────────────────────┘

```

## Data Flow Diagram

```
┌───────────────┐
│  News Sources │
└───────┬───────┘
        │
        ▼
┌───────────────┐    ┌───────────────┐    ┌───────────────┐
│  News Items   │    │   Recipient   │    │   External    │
│  Collection   │    │    Profiles   │    │    Context    │
└───────┬───────┘    └───────┬───────┘    └───────┬───────┘
        │                    │                    │
        └────────────────────┼────────────────────┘
                             │
                             ▼
                     ┌───────────────┐
                     │ Preprocessing │
                     └───────┬───────┘
                             │
                             ▼
                     ┌───────────────┐
                     │  Web Search   │  WAVE 0
                     └───────┬───────┘
                             │
                             ▼
                     ┌───────────────┐
                     │ Categorization│  WAVE 1
                     └───────┬───────┘
                             │
                             ▼
                     ┌───────────────┐
                     │ Fact-Checking │  WAVE 2
                     │ (includes     │
                     │ Triangulation)│
                     └───────┬───────┘
                             │
                             ▼
                     ┌───────────────┐
                     │   Advanced    │
                     │   Analysis    │  WAVE 4
                     └───────┬───────┘
                             │
                             ▼
                     ┌───────────────┐
                     │ Summarization │  WAVE 4
                     └───────┬───────┘
                             │
                             ▼
                     ┌───────────────┐
                     │   Delivery    │
                     └───────┬───────┘
                             │
                             ▼
                     ┌───────────────┐
                     │    Reader     │
                     └───────────────┘

```

## Component Architecture

```
┌─────────────────────────────────────────────────────────────────┐
│                       News Bot System                           │
│                                                                 │
│  ┌─────────────────┐          ┌─────────────────────────────┐   │
│  │                 │          │                             │   │
│  │  Data Sources   │◄────────►│      Data Management        │   │
│  │                 │          │                             │   │
│  └─────────────────┘          └─────────────┬───────────────┘   │
│                                             │                   │
│                                             │                   │
│  ┌─────────────────┐          ┌─────────────▼───────────────┐   │
│  │                 │          │                             │   │
│  │  Configuration  │◄────────►│      Orchestration          │   │
│  │                 │          │                             │   │
│  └─────────────────┘          └─────────────┬───────────────┘   │
│                                             │                   │
│                                             │                   │
│  ┌─────────────────┐          ┌─────────────▼───────────────┐   │
│  │                 │          │                             │   │
│  │  LLM Interface  │◄────────►│      Agent Framework        │   │
│  │                 │          │                             │   │
│  └─────────────────┘          └─────────────┬───────────────┘   │
│                                             │                   │
│                                             │                   │
│  ┌─────────────────┐          ┌─────────────▼───────────────┐   │
│  │                 │          │                             │   │
│  │  Monitoring     │◄────────►│      Delivery Interface     │   │
│  │                 │          │                             │   │
│  └─────────────────┘          └─────────────────────────────┘   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘

```

## Agent Architecture

```
┌─────────────────────────────────────────────────────────────────┐
│                          Agent                                  │
│                                                                 │
│  ┌─────────────────┐          ┌─────────────────────────────┐   │
│  │                 │          │                             │   │
│  │  Input Handler  │────────► │      Prompt Builder         │   │
│  │                 │          │                             │   │
│  └─────────────────┘          └─────────────┬───────────────┘   │
│                                             │                   │
│                                             │                   │
│  ┌─────────────────┐          ┌─────────────▼───────────────┐   │
│  │                 │          │                             │   │
│  │  Cache Manager  │◄────────►│      LLM Interface          │   │
│  │                 │          │                             │   │
│  └─────────────────┘          └─────────────┬───────────────┘   │
│                                             │                   │
│                                             │                   │
│  ┌─────────────────┐          ┌─────────────▼───────────────┐   │
│  │                 │          │                             │   │
│  │  Error Handler  │◄────────►│      Response Parser        │   │
│  │                 │          │                             │   │
│  └─────────────────┘          └─────────────┬───────────────┘   │
│                                             │                   │
│                                             │                   │
│  ┌─────────────────┐          ┌─────────────▼───────────────┐   │
│  │                 │          │                             │   │
│  │  State Manager  │◄────────►│      Output Formatter       │   │
│  │                 │          │                             │   │
│  └─────────────────┘          └─────────────────────────────┘   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘

```

## Prompt Template System

```
┌─────────────────────────────────────────────────────────────────┐
│                    Prompt Template System                       │
│                                                                 │
│  ┌─────────────────┐          ┌─────────────────────────────┐   │
│  │                 │          │                             │   │
│  │  Base Templates │────────► │      Template Registry      │   │
│  │                 │          │                             │   │
│  └─────────────────┘          └─────────────┬───────────────┘   │
│                                             │                   │
│                                             │                   │
│  ┌─────────────────┐          ┌─────────────▼───────────────┐   │
│  │                 │          │                             │   │
│  │  Agent-Specific │────────► │      Template Loader        │   │
│  │    Templates    │          │                             │   │
│  └─────────────────┘          └─────────────┬───────────────┘   │
│                                             │                   │
│                                             │                   │
│  ┌─────────────────┐          ┌─────────────▼───────────────┐   │
│  │                 │          │                             │   │
│  │  Dynamic Data   │────────► │      Variable Resolver      │   │
│  │                 │          │                             │   │
│  └─────────────────┘          └─────────────┬───────────────┘   │
│                                             │                   │
│                                             │                   │
│  ┌─────────────────┐          ┌─────────────▼───────────────┐   │
│  │                 │          │                             │   │
│  │  Token Counter  │◄────────►│      Template Renderer      │   │
│  │                 │          │                             │   │
│  └─────────────────┘          └─────────────────────────────┘   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘

```
## Evolution of Architecture

```
┌───────────────────────────────────────────────────────────────────┐
│                                                                   │
│  H.01 (Multi-Agent Prototype)                                     │
│  ┌─────────┐     ┌─────────────┐     ┌─────────────┐              │
│  │ News    │────►│ Categorizer │────►│ FactChecker │──┐           │
│  │ Input   │     │   Agent     │     │   Agent     │  │           │
│  └─────────┘     └─────────────┘     └─────────────┘  │           │
│                                                       │           │
│                  ┌─────────────┐                      │           │
│                  │ Recommender │                      │           │
│                  │   Agent     │                      │           │
│                  └──────┬──────┘                      │           │
│                         │                             │           │
│                         └─────────────────┐           │           │
│                                           ▼           ▼           │
│                                      ┌─────────────────────────┐  │
│                                      │      Summarizer         │  │
│                                      │        Agent            │  │
│                                      └────────────┬────────────┘  │
│                                                   │               │
│                                                   ▼               │
│                                              ┌─────────┐          │
│                                              │ Output  │          │
│                                              │         │          │
│                                              └─────────┘          │
│                                                                   │
├───────────────────────────────────────────────────────────────────┤
│                                                                   │
│  H.02 (Time-Sensitive & Synthesis)                                │
│  ┌─────────┐     ┌─────────────┐     ┌─────────────┐              │
│  │ News    │────►│ Categorizer │────►│ FactChecker │──┐           │
│  │ Input   │     │   Agent     │     │   Agent     │  │           │
│  └─────────┘     └─────────────┘     └─────────────┘  │           │
│                                                       │           │
│                  ┌─────────────┐                      │           │
│                  │ Recommender │                      │           │
│                  │   Agent     │                      │           │
│                  └──────┬──────┘                      │           │
│                         │                             │           │
│                         └─────────────────┐           │           │
│                                           ▼           ▼           │
│                                      ┌─────────────────────────┐  │
│                                      │      Synthesis          │  │
│                                      │        Agent            │  │
│                                      └────────────┬────────────┘  │
│                                                   │               │
│                                                   ▼               │
│                                      ┌─────────────────────────┐  │
│                                      │      Summarizer         │  │
│                                      │        Agent            │  │
│                                      └────────────┬────────────┘  │
│                                                   │               │
│                                                   ▼               │
│                                              ┌─────────┐          │
│                                              │ Output  │          │
│                                              │         │          │
│                                              └─────────┘          │
│                                                                   │
├───────────────────────────────────────────────────────────────────┤
│                                                                   │
│  H.02.5 (Market Data Integration)                                 │
│  ┌─────────┐     ┌─────────────┐     ┌─────────────┐              │
│  │ News    │────►│ Categorizer │────►│ FactChecker │──┐           │
│  │ Input   │     │   Agent     │     │   Agent     │  │           │
│  └─────────┘     └─────────────┘     └─────────────┘  │           │
│                                                       │           │
│                  ┌─────────────┐                      │           │
│                  │ Recommender │                      │           │
│                  │   Agent     │                      │           │
│                  └──────┬──────┘                      │           │
│                         │                             │           │
│                         └─────────────────┐           │           │
│                                           ▼           ▼           │
│  ┌─────────┐                        ┌─────────────────────────┐   │
│  │ Market  │                        │      Synthesis          │   │
│  │ Data    │───────────────────────►│        Agent            │   │
│  │         │                        └────────────┬────────────┘   │
│  └─────────┘                                     │                │
│                                                  ▼                │
│                                      ┌─────────────────────────┐  │
│                                      │      Summarizer         │  │
│                                      │        Agent            │  │
│                                      └────────────┬────────────┘  │
│                                                   │               │
│                                                   ▼               │
│                                              ┌─────────┐          │
│                                              │ Output  │          │
│                                              │         │          │
│                                              └─────────┘          │
│                                                                   │
├───────────────────────────────────────────────────────────────────┤
│                                                                   │
│  H.02.7 (Full Agent Swarm)                                        │
│                                                                   │
│  ┌─────────────────────────────────────────────────────────────┐  │
│  │                      Fetch & Semantic Layer                 │  │
│  │                                                             │  │
│  │  ┌─────────┐    ┌─────────────┐    ┌─────────────────────┐  │  │
│  │  │ News    │───►│ Normalizer  │───►│ Vector Store &      │  │  │
│  │  │ Input   │    │             │    │ Semantic Search     │  │  │
│  │  └─────────┘    └─────────────┘    └─────────────────────┘  │  │
│  └───────────────────────────┬─────────────────────────────────┘  │
│                              │                                    │
│                              ▼                                    │
│  ┌──────────────────────────────────────────────────────────────┐ │
│  │                        Agent Swarm                           │ │
│  │                                                              │ │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐           │ │
│  │  │ Categorizer │  │ FactChecker │  │ Recommender │           │ │
│  │  └──────┬──────┘  └──────┬──────┘  └──────┬──────┘           │ │
│  │         │                │                │                  │ │
│  │         └────────────────┼────────────────┘                  │ │
│  │                          │                                   │ │
│  │  ┌─────────────┐  ┌──────┴──────┐  ┌─────────────┐           │ │
│  │  │ Patent      │  │ Synthesizer │  │ Repo-Matcher│           │ │
│  │  │ Agent       │◄─┤             │◄─┤             │           │ │
│  │  └──────┬──────┘  └──────┬──────┘  └──────┬──────┘           │ │
│  │         │                │                │                  │ │
│  │         └────────────────┼────────────────┘                  │ │
│  │                          │                                   │ │
│  └──────────────────────────┼───────────────────────────────────┘ │
│                             │                                     │
│                             ▼                                     │
│                      ┌─────────────┐                              │
│                      │ Summarizer  │                              │
│                      └──────┬──────┘                              │
│                             │                                     │
│                             ▼                                     │
│                      ┌─────────────┐                              │
│                      │   Output    │                              │
│                      └─────────────┘                              │
│                                                                   │
┌────────────────────────────────────────────────────────────────────────────────┐
│                                                                                │
│                 H.02.7.3  (Modular Swarm Architecture)                         │
│                                                                                │
│   ┌────────────────────────────────────────────────────────────────────────┐   │
│   │                          SwarmOrchestrator                             │   │
│   │                                                                        │   │
│   │   ┌─────────────────────────────────────────────────────────────────┐  │   │
│   │   │                         SwarmRuntime                            │  │   │
│   │   │                                                                 │  │   │
│   │   │  ┌─────────┐   ┌─────────┐   ┌─────────┐   ┌─────────┐          │  │   │
│   │   │  │  News   │──►│ Wave 0  │──►│ Wave 1  │──►│ Wave 2  │          │  │   │
│   │   │  │  Input  │   │WebSearch│   │Categor. │   │FactCheck│          │  │   │
│   │   │  └─────────┘   └─────────┘   └─────────┘   └─────────┘          │  │   │
│   │   │                                         │                       │  │   │
│   │   │                                         ▼                       │  │   │
│   │   │  ┌────────────────────────────────────────────────────────────┐ │  │   │
│   │   │  │                             Wave 3                         │ │  │   │
│   │   │  │                                                            │ │  │   │
│   │   │  │  ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐           │ │  │   │
│   │   │  │  │Synthesis│ │ Linkage │ │  ArXiv  │ │ GitHub  │           │ │  │   │
│   │   │  │  │         │ │Detector │ │Searcher │ │Searcher │           │ │  │   │
│   │   │  │  └────┬────┘ └────┬────┘ └────┬────┘ └────┬────┘           │ │  │   │
│   │   │  │       │           │           │           │                │ │  │   │
│   │   │  │  ┌─────────┐      │           │           │                │ │  │   │
│   │   │  │  │ Patent  │◄─────┘           │           │                │ │  │   │
│   │   │  │  │  Agent  │                  │           │                │ │  │   │
│   │   │  │  └────┬────┘                  │           │                │ │  │   │
│   │   │  │       │                       │           │                │ │  │   │
│   │   │  └───────┼───────────────────────┼───────────┼────────────────┘ │  │   │
│   │   │          │                       │           │                  │  │   │
│   │   │          │                       │           │                  │  │   │
│   │   │          └───────────────────────┼───────────┘                  │  │   │
│   │   │                                  │                              │  │   │
│   │   │                                  ▼                              │  │   │
│   │   │  ┌───────────────────────────────────────────────────────────┐  │  │   │
│   │   │  │                             Wave 4                        │  │  │   │
│   │   │  │                                                           │  │  │   │
│   │   │  │               ┌────────────────────────┐                  │  │  │   │
│   │   │  │               │    SummarizerLogic     │                  │  │  │   │
│   │   │  │               └──────────┬─────────────┘                  │  │  │   │
│   │   │  └───────────────────────────┼───────────────────────────────┘  │  │   │
│   │   │                              │                                  │  │   │
│   │   │  ┌───────────────────────────────────────────────────────────┐  │  │   │
│   │   │  │                Function Calling Capabilities              │  │  │   │
│   │   │  │                                                           │  │  │   │
│   │   │  │  ┌─────────┐ ┌─────────┐ ┌─────────┐ ┌─────────┐          │  │  │   │
│   │   │  │  │Semantic │ │ Market  │ │ Vector  │ │ External│          │  │  │   │
│   │   │  │  │ Search  │ │  Data   │ │  Store  │ │   APIs  │          │  │  │   │
│   │   │  │  └─────────┘ └─────────┘ └─────────┘ └─────────┘          │  │  │   │
│   │   │  └───────────────────────────────────────────────────────────┘  │  │   │
│   │   │                                                                 │  │   │
│   │   └───────────────────────────────┬─────────────────────────────────┘  │   │
│   │                                   │                                    │   │
│   └───────────────────────────────────┼────────────────────────────────────┘   │
│                                       │                                        │
│                                       ▼                                        │
│                                ┌───────────────┐                               │
│                                │     Output    │                               │
│                                └───────────────┘                               │
│                                                                                │
└────────────────────────────────────────────────────────────────────────────────┘
```

## Future Deployment Architecture Could Include 
```
┌─────────────────────────────────────────────────────────────────┐
│                    Kubernetes Cluster                           │
│                                                                 │
│  ┌─────────────────┐          ┌─────────────────────────────┐   │
│  │                 │          │                             │   │
│  │  News Fetcher   │          │      Agent Pods             │   │
│  │     Pods        │          │                             │   │
│  │                 │          │  ┌─────────┐  ┌─────────┐   │   │
│  │  ┌─────────┐    │          │  │Agent A  │  │Agent B  │   │   │
│  │  │Pod 1    │    │          │  │Pods     │  │Pods     │   │   │
│  │  └─────────┘    │          │  │         │  │         │   │   │
│  │                 │          │  │┌─────┐  │  │┌─────┐  │   │   │
│  │  ┌─────────┐    │          │  ││Pod 1│  │  ││Pod 1│  │   │   │
│  │  │Pod 2    │    │          │  │└─────┘  │  │└─────┘  │   │   │
│  │  └─────────┘    │          │  │         │  │         │   │   │
│  │                 │          │  │┌─────┐  │  │┌─────┐  │   │   │
│  │  ┌─────────┐    │          │  ││Pod 2│  │  ││Pod 2│  │   │   │
│  │  │Pod 3    │    │          │  │└─────┘  │  │└─────┘  │   │   │
│  │  └─────────┘    │          │  └─────────┘  └─────────┘   │   │
│  │                 │          │                             │   │
│  └─────────────────┘          └─────────────────────────────┘   │
│                                                                 │
│                                                                 │
│  ┌─────────────────┐          ┌─────────────────────────────┐   │
│  │                 │          │                             │   │
│  │  Redis Cache    │          │      PostgreSQL             │   │
│  │                 │          │                             │   │
│  │  ┌─────────┐    │          │  ┌─────────────────────┐    │   │
│  │  │Master   │    │          │  │Primary              │    │   │
│  │  └─────────┘    │          │  └─────────────────────┘    │   │
│  │                 │          │                             │   │
│  │  ┌─────────┐    │          │  ┌─────────────────────┐    │   │
│  │  │Replica 1│    │          │  │Replica              │    │   │
│  │  └─────────┘    │          │  └─────────────────────┘    │   │
│  │                 │          │                             │   │
│  │  ┌─────────┐    │          │                             │   │
│  │  │Replica 2│    │          │                             │   │
│  │  └─────────┘    │          │                             │   │
│  │                 │          │                             │   │
│  └─────────────────┘          └─────────────────────────────┘   │
│                                                                 │
│                                                                 │
│  ┌─────────────────┐          ┌─────────────────────────────┐   │
│  │                 │          │                             │   │
│  │  API Gateway    │          │      Monitoring             │   │
│  │                 │          │                             │   │
│  │  ┌─────────┐    │          │ ┌──────────┐  ┌─────────┐   │   │
│  │  │Load     │    │          │ │Prometheus│  │ Grafana │   │   │
│  │  │Balancer │    │          │ └──────────┘  └─────────┘   │   │
│  │  └─────────┘    │          │                             │   │
│  │                 │          │  ┌─────────────────────┐    │   │
│  │                 │          │  │Logging              │    │   │
│  │                 │          │  └─────────────────────┘    │   │
│  │                 │          │                             │   │
│  └─────────────────┘          └─────────────────────────────┘   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘


These diagrams provide visual representations of the News Bot system's architecture, component interactions, and evolution over time. They complement the detailed descriptions in the system architecture document and help reviewers understand the system's design and operation.
